---
interface Props {
  title: string;
  description: string;
  iconType: 'residential' | 'commercial' | 'infrastructure';
  imageSrc: string;
  imageAlt: string;
  reverse?: boolean;
}

const { title, description, iconType, imageSrc, imageAlt, reverse = false } = Astro.props;

// Icon SVG paths and viewBoxes
const icons = {
  residential: {
    path: 'M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z',
    viewBox: '0 0 16 16'
  },
  commercial: {
    path: 'M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3V1z M4 3h2v2H4V3zm3 0h2v2H7V3zm3 0h2v2h-2V3zM4 6h2v2H4V6zm3 0h2v2H7V6zm3 0h2v2h-2V6zM4 9h2v2H4V9zm3 0h2v2H7V9zm3 0h2v2h-2V9z',
    viewBox: '0 0 16 16'
  },
  infrastructure: {
    path: 'M17.6 3.19995H30.4C31.285 3.19995 32 3.91495 32 4.79995V27.2C32 28.085 31.285 28.8 30.4 28.8H17.6C16.715 28.8 16 28.085 16 27.2V4.79995C16 3.91495 16.715 3.19995 17.6 3.19995ZM24 13.2C23.335 13.2 22.8 13.735 22.8 14.4V17.6C22.8 18.265 23.335 18.8 24 18.8C24.665 18.8 25.2 18.265 25.2 17.6V14.4C25.2 13.735 24.665 13.2 24 13.2ZM25.2 22.4C25.2 21.735 24.665 21.2 24 21.2C23.335 21.2 22.8 21.735 22.8 22.4V25.6C22.8 26.265 23.335 26.8 24 26.8C24.665 26.8 25.2 26.265 25.2 25.6V22.4ZM24 5.19995C23.335 5.19995 22.8 5.73495 22.8 6.39995V9.59995C22.8 10.265 23.335 10.8 24 10.8C24.665 10.8 25.2 10.265 25.2 9.59995V6.39995C25.2 5.73495 24.665 5.19995 24 5.19995ZM1.6 7.99995H14.4V11.2H12.4V14.4H14.4V19.2C11.75 19.2 9.6 21.35 9.6 24V27.2C9.6 28.085 8.885 28.8 8 28.8H6.4C5.515 28.8 4.8 28.085 4.8 27.2V24C4.8 21.35 2.65 19.2 0 19.2V14.4H3.6V11.2H1.6C0.715 11.2 0 10.485 0 9.59995C0 8.71495 0.715 7.99995 1.6 7.99995ZM10 11.2H6V14.4H10V11.2Z',
    viewBox: '0 0 32 32'
  }
};
---

<div class={`service-card ${reverse ? 'service-card--reverse' : ''}`}>
  <div class="service-card__content">
    <div class="service-card__glow-container">
      <div class="service-card__glow service-card__glow--orange"></div>
      <div class="service-card__glow service-card__glow--yellow"></div>
    </div>

    <div class="service-card__icon-box">
      <svg class="service-card__icon" viewBox={icons[iconType].viewBox} fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d={icons[iconType].path} fill="#F14B00"/>
      </svg>
    </div>

    <div class="service-card__text">
      <h3 class="service-card__title">{title}</h3>
      <p class="service-card__description">{description}</p>
    </div>
  </div>

  <div class="service-card__image-wrapper">
    <img
      src={imageSrc}
      alt={imageAlt}
      class="service-card__image"
    />
    <svg class="service-card__corner service-card__corner--top-left" width="43" height="40" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.4909 25.9348V39.5M21.4909 0.5V14.0652M15.1087 19.9915H0.5M42.5 19.9915H27.8913" stroke="white" stroke-linecap="round"/>
    </svg>
    <svg class="service-card__corner service-card__corner--top-right" width="43" height="40" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.4909 25.9348V39.5M21.4909 0.5V14.0652M15.1087 19.9915H0.5M42.5 19.9915H27.8913" stroke="white" stroke-linecap="round"/>
    </svg>
    <svg class="service-card__corner service-card__corner--bottom-left" width="43" height="40" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.4909 25.9348V39.5M21.4909 0.5V14.0652M15.1087 19.9915H0.5M42.5 19.9915H27.8913" stroke="white" stroke-linecap="round"/>
    </svg>
    <svg class="service-card__corner service-card__corner--bottom-right" width="43" height="40" viewBox="0 0 43 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.4909 25.9348V39.5M21.4909 0.5V14.0652M15.1087 19.9915H0.5M42.5 19.9915H27.8913" stroke="white" stroke-linecap="round"/>
    </svg>
  </div>
</div>

<style>
  .service-card {
    position: relative;
    display: flex;
    flex-direction: row;
    width: 100%;
    max-width: 1272px;
    height: 443px;
    overflow: hidden;
    background: #0B0B0B;
    cursor: default;
  }

  .service-card--reverse {
    flex-direction: row-reverse;
  }

  .service-card__glow-container {
    position: absolute;
    right: -120px;
    top: 50%;
    transform: translateY(-50%);
    width: 180px;
    height: 443px;
    pointer-events: none;
    z-index: 0;
    transition: transform 0.5s ease, opacity 0.5s ease;
  }

  .service-card:hover .service-card__glow-container {
    transform: translateY(-50%) scale(1.2);
  }

  .service-card--reverse .service-card__glow-container {
    right: auto;
    left: -120px;
  }

  .service-card__glow {
    position: absolute;
    border-radius: 50%;
    transition: opacity 0.5s ease, filter 0.5s ease;
  }

  .service-card__glow--orange {
    width: 180px;
    height: 443px;
    background: var(--color-orange-accent);
    filter: blur(100px);
    opacity: 0.9;
  }

  .service-card:hover .service-card__glow--orange {
    opacity: 1;
    filter: blur(80px);
  }

  .service-card__glow--yellow {
    width: 120px;
    height: 300px;
    background: var(--color-orange-yellow);
    filter: blur(60px);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .service-card:hover .service-card__glow--yellow {
    filter: blur(50px);
  }

  .service-card__content {
    position: relative;
    width: 646px;
    height: 443px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 40px;
    background: #111111;
    border: 1px solid #525252;
    z-index: 2;
    flex-shrink: 0;
    overflow: hidden;
    transition: border-color 0.4s ease, box-shadow 0.4s ease;
  }

  .service-card:hover .service-card__content {
    border-color: rgba(241, 75, 0, 0.4);
    box-shadow: inset 0 0 30px rgba(241, 75, 0, 0.05);
  }

  .service-card__icon-box {
    position: absolute;
    top: 30px;
    left: 30px;
    width: 60px;
    height: 60px;
    background: #161616;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
  }

  .service-card:hover .service-card__icon-box {
    transform: scale(1.1);
    background: #1a1a1a;
    box-shadow: 0 0 20px rgba(241, 75, 0, 0.3);
  }

  .service-card--reverse .service-card__icon-box {
    left: auto;
    right: 30px;
  }

  .service-card__icon {
    width: 32px;
    height: 32px;
    transition: transform 0.3s ease;
  }

  .service-card__icon path {
    transition: fill 0.3s ease;
  }

  .service-card:hover .service-card__icon {
    transform: scale(1.1);
  }

  .service-card:hover .service-card__icon path {
    fill: var(--color-orange-light);
  }

  .service-card__text {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 41px;
    max-width: 358px;
  }

  .service-card__title {
    font-family: var(--font-manrope);
    font-size: 32px;
    font-weight: 400;
    line-height: 120%;
    color: var(--color-white);
    margin: 0;
    transition: text-shadow 0.3s ease;
  }

  .service-card:hover .service-card__title {
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.15);
  }

  .service-card__description {
    font-family: var(--font-poppins);
    font-size: 16px;
    font-weight: 400;
    line-height: 24px;
    color: var(--color-gray-medium);
    margin: 0;
    transition: color 0.3s ease;
  }

  .service-card:hover .service-card__description {
    color: var(--color-gray-light);
  }

  .service-card__image-wrapper {
    position: relative;
    width: 472px;
    height: 339px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: visible;
    margin: auto;
    flex-shrink: 0;
  }

  .service-card__image {
    width: 410px;
    height: 280px;
    object-fit: cover;
    position: absolute;
    top: 30px;
    left: 31px;
    transition: transform 0.5s ease;
  }

  .service-card:hover .service-card__image {
    transform: scale(1.05);
  }

  .service-card__image-overlay {
    position: absolute;
    top: 30px;
    left: 31px;
    width: 410px;
    height: 280px;
    background: linear-gradient(90deg, #111111 0%, rgba(17, 17, 17, 0.8) 30%, rgba(17, 17, 17, 0) 100%);
    pointer-events: none;
    z-index: 1;
  }

  .service-card--reverse .service-card__image-overlay {
    background: linear-gradient(270deg, #111111 0%, rgba(17, 17, 17, 0.8) 30%, rgba(17, 17, 17, 0) 100%);
  }

  .service-card__corner {
    position: absolute;
    width: 43px;
    height: 40px;
    pointer-events: none;
    z-index: 3;
    transition: opacity 0.3s ease, transform 0.3s ease;
    opacity: 0.7;
  }

  .service-card:hover .service-card__corner {
    opacity: 1;
  }

  .service-card:hover .service-card__corner--top-left {
    transform: translate(-3px, -3px);
  }

  .service-card:hover .service-card__corner--top-right {
    transform: translate(3px, -3px);
  }

  .service-card:hover .service-card__corner--bottom-left {
    transform: translate(-3px, 3px);
  }

  .service-card:hover .service-card__corner--bottom-right {
    transform: translate(3px, 3px);
  }

  .service-card__corner--top-left {
    top: 0;
    left: 0;
  }

  .service-card__corner--top-right {
    top: 0;
    right: 0;
  }

  .service-card__corner--bottom-left {
    bottom: 0;
    left: 0;
  }

  .service-card__corner--bottom-right {
    bottom: 0;
    right: 0;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .service-card,
    .service-card--reverse {
      flex-direction: column;
      height: auto;
    }

    .service-card__icon-box {
      top: 30px;
      left: 30px;
    }

    .service-card__content {
      width: 100%;
      height: auto;
    }

    .service-card__image-wrapper {
      width: 100%;
      height: auto;
      min-height: 300px;
      padding: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .service-card__image {
      width: 100%;
      max-width: 500px;
      height: auto;
      min-height: 280px;
      position: relative;
      top: 0;
      left: 0;
      object-fit: cover;
    }

    .service-card:hover .service-card__image {
      transform: scale(1.05);
    }

    .service-card__image-overlay {
      display: none;
    }

    .service-card__corner {
      display: none;
    }

    .service-card__glow-container {
      right: -50px;
      left: auto;
    }
  }

  @media (max-width: 768px) {
    .service-card {
      height: auto;
    }

    .service-card__content {
      padding: 70px 20px 60px;
      width: 100%;
      height: auto;
      margin-bottom: 50px;
      position: relative;
      z-index: 3;
    }

    .service-card__icon-box {
      width: 40px;
      height: 40px;
      top: 20px;
      left: 20px;
    }

    .service-card__icon {
      width: 22px;
      height: 22px;
    }

    .service-card__title {
      font-size: 24px;
    }

    .service-card__description {
      color: var(--color-white);
      font-size: 15px;
      line-height: 22px;
    }

    .service-card__text {
      gap: 20px;
      max-width: 100%;
    }

    .service-card__glow-container {
      top: auto;
      bottom: -100px;
      transform: none;
      opacity: 0.5;
    }

    .service-card__glow--orange {
      filter: blur(120px);
      opacity: 0.4;
    }

    .service-card__glow--yellow {
      filter: blur(80px);
      opacity: 0.3;
    }

    .service-card__image-wrapper {
      width: 100%;
      height: auto;
      min-height: 250px;
      padding: 0 20px 30px;
    }

    .service-card__image {
      width: 100%;
      max-width: 410px;
      height: auto;
      min-height: 200px;
      position: relative;
      top: 0;
      left: 0;
    }

    .service-card__image-overlay {
      width: 100%;
      max-width: 410px;
      height: 100%;
      top: 0;
      left: 0;
    }

    .service-card__corner {
      display: none;
    }
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .service-card__glow-container,
    .service-card__glow,
    .service-card__content,
    .service-card__icon-box,
    .service-card__icon,
    .service-card__icon path,
    .service-card__title,
    .service-card__description,
    .service-card__image,
    .service-card__corner {
      transition: none;
    }
  }
</style>
